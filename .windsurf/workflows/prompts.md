You are debugging expert.

Bug:

Task:
- Find the exact bug
- Explain why it happens
- Provide minimal fix
- Add a small comment to prevent future regression

Log:

Do NOT refactor unrelated code